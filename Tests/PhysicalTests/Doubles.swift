import XCTest
import Physical
import Foundation

final class Doubles: XCTestCase {

    override func setUpWithError() throws {
    }

    override func tearDownWithError() throws {
    }

    func testTranscendentals() {
		typealias ArrayOps = ([Double]) -> [Double]
		
		let input = [1, 2, 2.3, 4]
		
		for (function, output): (ArrayOps, [Double]) in [
			(exp, [2.718281828459045, 7.38905609893065, 9.974182454814718, 54.598150033144236]),
			(exp2, [2.0, 4.0, 4.924577653379664, 16.0]),
			(expm1, [1.7182818284590453, 6.38905609893065, 8.97418245481472, 53.59815003314424]),
			(log, [0.0, 0.6931471805599453, 0.8329091229351039, 1.3862943611198906]),
			(log2, [0.0, 1.0, 1.2016338611696504, 2.0]),
			(log10, [0.0, 0.3010299956639812, 0.36172783601759284, 0.6020599913279624]),
			(log1p, [0.6931471805599453, 1.0986122886681096, 1.1939224684724343, 1.6094379124341003]),
			(logb, [0.0, 1.0, 1.0, 2.0]),
		] {
			XCTAssertEqual(function(input), output)
		}
    }
	
	func testTrigonometrics() {
		typealias ArrayOps = ([Double]) -> [Double]
		
		let input = [1, 2, 2.3, 4]
		
		for (function, output): (ArrayOps, [Double]) in [
			(cos, [0.5403023058681397, -0.4161468365471424, -0.666276021279824, -0.6536436208636119]),
			(sin, [0.8414709848078965, 0.9092974268256816, 0.7457052121767204, -0.7568024953079284]),
			(tan, [1.557407724654902, -2.185039863261519, -1.1192136417341327, 1.1578212823495775]),
			(cosh, [1.5430806348152437, 3.7621956910836314, 5.037220649268761, 27.308232836016487]),
			(sinh, [1.1752011936438014, 3.6268604078470186, 4.936961805545957, 27.289917197127753]),
			(tanh, [0.7615941559557649, 0.9640275800758169, 0.9800963962661914, 0.999329299739067]),
		] {
			XCTAssertEqual(function(input), output)
		}
	}
	
	func testExponentiation() {
		XCTAssertEqual(pow(2.3, 12.1), 23818.083629594406)
		XCTAssertEqual(pow([1, 2, 2.3, 4], 12.1), [1.0, 4389.984102548656, 23818.083629594406, 19271960.420629926])
		XCTAssertEqual(pow(2.3, [0.04, 1, 12.1]), [1.0338775701001033, 2.3, 23818.083629594406])
		XCTAssertNil(pow([1, 2, 2.3, 4], [0.04, 1, 12.1]))
		XCTAssertEqual(pow([1, 2, 2.3, 4], [0.04, 1, 12.1, 15])!, [1.0, 2.0, 23818.083629594406, 1073741824.0])
	}

}
